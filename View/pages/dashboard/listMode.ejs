<%- include('../../partials/head')%>
<body class="flex relative min-h-screen w-full bg-gray-200">
    <%- include('../../partials/aside')%>

    <!-- list page content -->
    <main class="w-full min-h-screen md:w-4/5 md:ml-auto p-4">
        <div class="flex justify-start items-center">
            <span id="drawer-toggler" class="cursor-pointer font-extrabold text-4xl mr-1 md:hidden">
                <svg class="w-6 h-6 hover:text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg>
            </span>
            <%- include('../../partials/brand')%>
        </div>
        <h2 class="text-center uppercase font-extralight text-gray-600 text-4xl my-2 border-b-2 border-red-600 pb-1 w-max mx-auto">
            my list
        </h2>
        <em class="block text-center text-sm text-gray-500">
            <% if(listCount > 0) { %>
                You have (<%= listCount %>) lists.
            <% } else { %>
                You have no lists. Create one now.
            <% } %>
        </em>
        <button onclick="toggleListModal()" class="block mx-auto outline-none focus:outline-none border-none">
            <svg class="my-2 w-16 h-16 transition-all cursor-pointer text-gray-500 hover:text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        </button>

        <section id="list-add-modal" class="hidden z-10 fixed top-0 left-0 h-screen w-full bg-gray-700 opacity-90 justify-center items-center">
            <article 
                class="w-4/5 max-w-lg mx-auto flex flex-col-reverse justify-center items-end">
                <form
                    method="POST" 
                    action="/dashboard/list" 
                    class="bg-gray-200 block w-full rounded-md">
                    <section class="w-11/12 mx-auto mt-4 flex flex-col-reverse">
                        <input 
                            autocomplete="off"
                            type="text" 
                            name="listName" 
                            id="listName"
                            class="px-1 block text-center w-full outline-none border-2 border-gray-300 rounded-xl focus:outline-none focus:border-gray-500 transition-all font-semibold"
                        >
                        <label for="listName" class="block text-center mb-2 text-sm font-semibold text-gray-600 capitalize">
                            Your list title
                        </label>
                    </section>
                    <button 
                        class="block outline-none focus:outline-none border-none w-max my-6 mx-auto py-1 px-6 hover:bg-gray-700 hover:text-gray-300 rounded-sm font-semibold uppercase text-sm shadow-sm hover:shadow-xl bg-gray-800 text-gray-100 transition" 
                        type="submit">
                        create
                    </button>
                </form>
                <button
                    class="outline-none focus:outline-none border-none text-3xl text-gray-100 hover:text-red-500" 
                    onclick="toggleListModal()">
                    &times;
                </button>
            </article>
        </section>
        
        <div class="flex flex-col">
            <% if(listCount > 0) {%>
                <% list.forEach(item => {%>
                <%- include('../../partials/listThumbnail', {user : item.user, id: item.id, title: item.title}) %>
                <% }) %>
            <%  } %>
        </div>
        
    </main>

    <script>
        const appDrawer = document.getElementById("dashboard-menu");
        const drawerToggler = document.getElementById("drawer-toggler");
        const closeDrawer = document.getElementById("close-drawer");
        const listAddModal = document.getElementById('list-add-modal');

        drawerToggler.onclick = function() {
            appDrawer.classList.remove("-translate-x-full");
        }
        closeDrawer.onclick = function() {
            appDrawer.classList.add("-translate-x-full");
        }

        function toggleListModal(){
            listAddModal.classList.toggle('hidden');
            listAddModal.classList.toggle('flex');
        }
    </script>
</body>
</html>